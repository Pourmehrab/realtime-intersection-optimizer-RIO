<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>1. Overview &#8212; AVIAN 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="2. Simulator/Data" href="[1].simulator.html" />
    <link rel="prev" title="Welcome to AVIAN’s documentation!" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          AVIAN</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://pourmehrab.github.io/home">Personal Page</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">1.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#terms">1.2. Terms</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-script">1.3. Main Script</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="[1].simulator.html">2. Simulator/Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="[1].simulator.html#module-src.time_keeper">2.1. Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="[1].simulator.html#module-data.data">2.2. Python Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="[2].intersection.html">3. Intersection</a></li>
<li class="toctree-l1"><a class="reference internal" href="[3].signal.html">4. Signal Phase and Timing (SPaT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="[4].trajectory.html">5. Trajectory</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">1. Overview</a><ul>
<li><a class="reference internal" href="#introduction">1.1. Introduction</a></li>
<li><a class="reference internal" href="#terms">1.2. Terms</a></li>
<li><a class="reference internal" href="#main-script">1.3. Main Script</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: Welcome to AVIAN’s documentation!"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Welcome to AV...</span>
    </a>
  </li>
  <li>
    <a href="[1].simulator.html" title="Next Chapter: 2. Simulator/Data"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">2. Simulator/Data &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
  <li>
    <a href="index.html" title="Previous Chapter: Welcome to AVIAN’s documentation!"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Welcome to AV...</span>
    </a>
  </li>
  <li>
    <a href="[1].simulator.html" title="Next Chapter: 2. Simulator/Data"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">2. Simulator/Data &raquo;</span>
    </a>
  </li>
<form action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="overview">
<h1>1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>1.1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The program is to simulate the performance of an isolated intersection under traffic of automated vehicles and conventional vehicles with variety of signal control methods. It is developed as part of the AVIAN project supported by National Science Foundation under <a class="reference external" href="https://www.nsf.gov/awardsearch/showAward?AWD_ID=1446813&amp;HistoricalAwards=false">grant award 1446813</a>. The base implementation was done in MATLAB programming language in 2015 - 2017.</p>
<p>Coded by: Mahmoud Pourmehrab (<a class="reference external" href="mailto:mpourmehrab&#37;&#52;&#48;ufl&#46;edu">mpourmehrab<span>&#64;</span>ufl<span>&#46;</span>edu</a>)</p>
<p>Visit the project website <a class="reference external" href="http://avian.essie.ufl.edu">here</a></p>
<blockquote>
<div><div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>The Python requirement is set to <code class="docutils literal notranslate"><span class="pre">3.5.2</span></code></li>
<li>Install packages using <code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></li>
<li>SI units used (speed in <span class="math notranslate nohighlight">\(m/s\)</span>, length in <span class="math notranslate nohighlight">\(m\)</span>, time in <span class="math notranslate nohighlight">\(s\)</span>, acceleration in <span class="math notranslate nohighlight">\(m/s^2\)</span>)</li>
<li>Run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">main</span> <span class="pre">&lt;intersection_name&gt;</span> <span class="pre">&lt;optimization_algo&gt;</span> <span class="pre">&lt;run</span> <span class="pre">mode&gt;</span></code></li>
<li><dl class="first docutils">
<dt>The printed information in the command line may have the following prefixes:</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code> phase addition to the end of SPaT</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;&lt;&lt;</span></code> phase removal to the beginning of SPaT</li>
<li><code class="docutils literal notranslate"><span class="pre">&gt;-&gt;</span></code> phase extension (only can happen to the last phase)</li>
<li><code class="docutils literal notranslate"><span class="pre">\\\</span></code> vehicle addition</li>
<li><code class="docutils literal notranslate"><span class="pre">///</span></code> vehicle removal</li>
<li><code class="docutils literal notranslate"><span class="pre">&gt;&#64;&gt;</span></code> vehicle departure scheduled</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Outputs are stored under <code class="docutils literal notranslate"><span class="pre">\log</span></code>:</dt>
<dd><ul class="first last">
<li><code class="docutils literal notranslate"><span class="pre">&lt;intersection</span> <span class="pre">name&gt;_vehicle_level</span></code> includes input csv plus the <code class="docutils literal notranslate"><span class="pre">departure</span> <span class="pre">time,</span> <span class="pre">vehicle</span> <span class="pre">ID</span></code> and <code class="docutils literal notranslate"><span class="pre">elapsed</span> <span class="pre">time</span></code> columns</li>
<li><code class="docutils literal notranslate"><span class="pre">&lt;intersection</span> <span class="pre">name&gt;_trj_point_level.csv</span></code> includes the trajectory points</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<ul class="last simple">
<li>As of now, no traffic generator module is developed as part of the main workflow. The traffic is input in csv format under <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</li>
<li>For simulation, the directory <code class="docutils literal notranslate"><span class="pre">\data\</span></code> shall include <code class="docutils literal notranslate"><span class="pre">&lt;intersection</span> <span class="pre">name&gt;.csv</span></code> which has the scenarios to be tested. Note the filename should match the intersection name.</li>
<li><dl class="first docutils">
<dt>The csv file must include columns with the following heading:</dt>
<dd><ul class="first last">
<li><cite>lane</cite>: lane index (one-based)</li>
<li><cite>type</cite>: vehicle type {0: CNV, 1: CAV}</li>
<li><cite>arrival time</cite>: arrival time at the stop bar measured in second from a fix reference point</li>
<li><cite>curSpd</cite>: detection speed</li>
<li><cite>dist</cite>: detection distance</li>
<li><cite>desSpd</cite>: desired speed</li>
<li><cite>dest</cite>: destination {0: right turn, 1: through, 2: left}</li>
<li><cite>L</cite>: length of vehicle</li>
<li><cite>maxDec</cite>: maximum deceleration rate vehicle can execute</li>
<li><cite>maxAcc</cite>: maximum acceleration rate vehicle can execute</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
</div></blockquote>
<dl class="docutils">
<dt>You can add any intersection in the <code class="docutils literal notranslate"><span class="pre">src/intersection/data.py</span></code>. The list of all available intersections is:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">13th16th</span></code>: A physical one, google map it in Gainesville for the image and lane assignment detail</li>
<li><code class="docutils literal notranslate"><span class="pre">TERL</span></code>: Located at <cite>2612 Springhill Road, Tallahassee, FL 32305</cite>. Note the lane numbering in the code is 1: Southbound (all movements), 2: Westbound (through and right turn), 3: Westbound (left turn), 4: Northbound (all movements), 5: Eastbound (through and right turn), 6: Eastbound (left turn).</li>
<li><code class="docutils literal notranslate"><span class="pre">reserv</span></code>:  for the reservation based model intersection that has 12 incoming lanes: 3 per approach and all lanes are exclusive (for more detail check <a class="reference external" href="http://www.cs.utexas.edu/~aim/">here</a>).</li>
<li>Some possible intersections to add are <code class="docutils literal notranslate"><span class="pre">RTS,</span> <span class="pre">42nd40th,</span> <span class="pre">SolarPark</span></code></li>
</ul>
</dd>
<dt>You also can choose from the following signal control methods:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">GA</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pretimed</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">MCF</span></code>      (under development)</li>
<li><code class="docutils literal notranslate"><span class="pre">actuated</span></code> (under development)</li>
</ul>
</dd>
<dt>You can run in either of the following modes (<em>pay attention to the requirements of each run mode</em>):</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">simulation</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">realtime</span></code></li>
</ul>
</dd>
</dl>
<p>For example, to simulate intersection of 13th and 16th in Gainesville with GA, invoke:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python</span> <span class="mi">13</span><span class="n">th16th</span> <span class="n">GA</span> <span class="n">simulation</span>
</pre></div>
</div>
<p>The <strong>UML diagram</strong> of the project is as the following (<em>you may want to zoom in</em>):</p>
<img alt="_images/UML.JPG" src="_images/UML.JPG" />
</div>
<div class="section" id="terms">
<h2>1.2. Terms<a class="headerlink" href="#terms" title="Permalink to this headline">¶</a></h2>
<dl class="glossary docutils">
<dt id="term-avian">AVIAN</dt>
<dd>Autonomous Vehicles at Intelligent intersections and Advanced Networks</dd>
<dt id="term-spat">SPaT</dt>
<dd>Signal Phase and Timing</dd>
<dt id="term-cav">CAV</dt>
<dd>Connected and Automated Vehicle</dd>
<dt id="term-cnv">CNV</dt>
<dd>Conventional Vehicle</dd>
<dt id="term-trajectory">Trajectory</dt>
<dd>A list of triples (time stamp, distance to stop bar, speed) to describe a vehicle’s movement</dd>
<dt id="term-gipps-cf">Gipps CF</dt>
<dd>A car following model developed by Gipps 1981 that models conventional vehicles movement</dd>
<dt id="term-ga">GA</dt>
<dd>Genetic Algorithm to optimize SPaTs decision</dd>
<dt id="term-badness">badness</dt>
<dd>In the context of GA, badness defines as the negative of fitness of an individual where less is preferred.</dd>
<dt id="term-mcf">MCF</dt>
<dd>Minimum Cost Flow model to optimize SPaTs decision</dd>
</dl>
</div>
<div class="section" id="main-script">
<h2>1.3. Main Script<a class="headerlink" href="#main-script" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">main.py</span></code> file implements the following work flow:</p>
<span class="target" id="module-main"></span><dl class="function">
<dt id="main.check_py_ver">
<code class="descclassname">main.</code><code class="descname">check_py_ver</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#main.check_py_ver" title="Permalink to this definition">¶</a></dt>
<dd><p>checks the python version to meet the requirement (<code class="docutils literal notranslate"><span class="pre">ver</span> <span class="pre">3.5.2</span></code>)</p>
</dd></dl>

<dl class="function">
<dt id="main.run_avian">
<code class="descclassname">main.</code><code class="descname">run_avian</code><span class="sig-paren">(</span><em>inter_name</em>, <em>method</em>, <em>sc</em>, <em>do_traj_computation</em>, <em>log_at_vehicle_level</em>, <em>log_at_trj_point_level</em>, <em>print_clock</em>, <em>print_signal_detail</em>, <em>print_trj_info</em>, <em>test_time</em>, <em>print_detection</em>, <em>print_departure</em><span class="sig-paren">)</span><a class="headerlink" href="#main.run_avian" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>For logging and printing of information set boolean variables:</dt>
<dd><ul class="first last simple">
<li><code class="docutils literal notranslate"><span class="pre">log_at_trj_point_level</span></code> saves a csv under <code class="docutils literal notranslate"><span class="pre">\log</span></code> directory that contains all trajectory points for all vehicles</li>
<li><code class="docutils literal notranslate"><span class="pre">log_at_vehicle_level</span></code> saves a csv file under <code class="docutils literal notranslate"><span class="pre">\log</span></code> directory that contains departure times and elapsed times and vehicle IDs</li>
</ul>
</dd>
<dt>The work flow is as the following:</dt>
<dd><ul class="first last simple">
<li>Tests for python version</li>
<li>Checks the input arguments to be valid</li>
<li><dl class="first docutils">
<dt>Instantiate:</dt>
<dd><ul class="first last">
<li><a class="reference internal" href="[2].intersection.html#src.intersection.Intersection" title="src.intersection.Intersection"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Intersection</span></code></a></li>
<li><a class="reference internal" href="[2].intersection.html#src.intersection.Lanes" title="src.intersection.Lanes"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Lanes</span></code></a></li>
<li><a class="reference internal" href="[2].intersection.html#src.intersection.Traffic" title="src.intersection.Traffic"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Traffic</span></code></a></li>
<li><dl class="first docutils">
<dt>trajectory planners: all bellow</dt>
<dd><ul class="first last">
<li><a class="reference internal" href="[4].trajectory.html#src.trajectory.LeadConventional" title="src.trajectory.LeadConventional"><code class="xref any py py-class docutils literal notranslate"><span class="pre">LeadConventional</span></code></a></li>
<li><a class="reference internal" href="[4].trajectory.html#src.trajectory.LeadConnected" title="src.trajectory.LeadConnected"><code class="xref any py py-class docutils literal notranslate"><span class="pre">LeadConnected</span></code></a></li>
<li><a class="reference internal" href="[4].trajectory.html#src.trajectory.FollowerConventional" title="src.trajectory.FollowerConventional"><code class="xref any py py-class docutils literal notranslate"><span class="pre">FollowerConventional</span></code></a></li>
<li><a class="reference internal" href="[4].trajectory.html#src.trajectory.FollowerConnected" title="src.trajectory.FollowerConnected"><code class="xref any py py-class docutils literal notranslate"><span class="pre">FollowerConnected</span></code></a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>signal: one of followings</dt>
<dd><ul class="first last">
<li><a class="reference internal" href="[3].signal.html#src.signal.GA_SPaT" title="src.signal.GA_SPaT"><code class="xref any py py-class docutils literal notranslate"><span class="pre">GA_SPaT</span></code></a></li>
<li><a class="reference internal" href="[3].signal.html#src.signal.Pretimed" title="src.signal.Pretimed"><code class="xref any py py-class docutils literal notranslate"><span class="pre">Pretimed</span></code></a></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>set simulation start time to when first vehicle shows up</dt>
<dd><ul class="first last">
<li><code class="xref any docutils literal notranslate"><span class="pre">Simulator</span></code></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>main loop stops only when all vehicles in the provided input traffic csv file are assigned a departure time.</dt>
<dd><ul class="first last">
<li>remove vehicles that are served</li>
<li>update SPaT</li>
<li>update vehicle information (includes addition too)</li>
<li>do signal</li>
<li>plan trajectories</li>
<li>update time and check of termination</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>inter_name</strong> (<em>str</em>) – intersection name</li>
<li><strong>method</strong> (<em>str</em>) – pretimed, GA, …</li>
<li><strong>sc</strong> (<em>int</em>) – scenario number (<em>should match the appendix of the input csv filename</em>)</li>
<li><strong>do_traj_computation</strong> – </li>
<li><strong>log_at_vehicle_level</strong> – </li>
<li><strong>log_at_trj_point_level</strong> – </li>
<li><strong>print_clock</strong> – prints the simulation clock</li>
<li><strong>print_signal_detail</strong> – </li>
<li><strong>print_trj_info</strong> – </li>
<li><strong>test_time</strong> – in seconds from start of simulation</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Mahmoud Pourmehrab &lt;<a class="reference external" href="mailto:pourmehrab&#37;&#52;&#48;gmail&#46;com">pourmehrab<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body"><p class="first">April-2018</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Organization:</th><td class="field-body"><p class="first last">University of Florida</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, Mahmoud Pourmehrab.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>